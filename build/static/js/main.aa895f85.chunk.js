(this["webpackJsonpreact-shopping-cart"]=this["webpackJsonpreact-shopping-cart"]||[]).push([[0],{334:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(35),i=n.n(c),s=n(18),o=n(20),l=n(28),u=n(5),d=n(3),b=n(34),j=n.n(b);var p=function(e,t){var n=r.a.useState((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.error(a),t}})),a=Object(u.a)(n,2),c=a[0],i=a[1];return[c,function(t){try{var n=t instanceof Function?t(c):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.error(a)}}]},m=n(1),h={isLoggedIn:!1,user:null,isLoggingIn:!1},O=Object(a.createContext)(),g=Object(a.createContext)(),f=function(e,t){switch(t.type){case"LOGIN_REQUEST":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:!1,user:null,isLoggingIn:!0});case"LOGIN_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:!0,user:t.payload.user,isLoggingIn:!1});case"LOGIN_FAILURE":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:!1,user:null,isLoggingIn:!1});case"LOGOUT_SUCCESS":return Object(d.a)(Object(d.a)({},e),h);default:throw new Error("Unknown action: ".concat(t.type))}},x=function(e){return localStorage.clear(),e({type:"LOGOUT_SUCCESS"})},v=function(e){var t=e.children,n=p("user",null),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(d.a)(Object(d.a)({},h),{},{user:c,isLoggedIn:j()(c,"username","").length>0,hasPermissions:function(e){var t,n=(null===c||void 0===c||null===(t=c.context)||void 0===t?void 0:t.roleDetails.reduce((function(e,t){return e=e.concat(t.permissionsDetails.map((function(e){return e.name})))}),[]))||[];return!e||(n||[]).some((function(t){return e.includes(t)}))}}),o=Object(a.useReducer)(f,s),l=Object(u.a)(o,2),b=l[0],x=l[1];return Object(a.useEffect)((function(){i(b.user)}),[b.isLoggedIn]),Object(m.jsx)(g.Provider,{value:x,children:Object(m.jsx)(O.Provider,{value:b,children:t})})},y={isSearchBarOpen:!1,searchKeyword:""},C=Object(a.createContext)(),N=Object(a.createContext)(),w=function(e,t){switch(t.type){case"TOGGLE_SEARCH_BAR":return Object(d.a)(Object(d.a)({},e),{},{isSearchBarOpen:!e.isSearchBarOpen});case"SET_SEARCH_KEYWORD":return Object(d.a)(Object(d.a)({},e),{},{searchKeyword:t.payload.searchKeyword});default:throw new Error("Unknown action: ".concat(t.type))}},S=function(e){var t=e.children,n=Object(a.useReducer)(w,y),r=Object(u.a)(n,2),c=r[0],i=r[1];return Object(m.jsx)(N.Provider,{value:i,children:Object(m.jsx)(C.Provider,{value:c,children:t})})},P=(n(170),{products:null,isLoading:!1,isLoaded:!1}),k=Object(a.createContext)(),I=Object(a.createContext)(),$=function(e,t){switch(t.type){case"GET_PRODUCTS_REQUEST":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0,isLoaded:!1});case"GET_PRODUCTS_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,isLoaded:!0,products:t.payload.products});case"GET_PRODUCTS_FAILURE":return Object(d.a)(Object(d.a)({},e),{},{products:null,isLoading:!1,isLoaded:!1});default:throw new Error("Unknown action: ".concat(t.type))}},D=function(e){var t=e.children,n=Object(a.useReducer)($,P),r=Object(u.a)(n,2),c=r[0],i=r[1];return Object(m.jsx)(I.Provider,{value:i,children:Object(m.jsx)(k.Provider,{value:c,children:t})})},E=n(22),q={isCartOpen:!1,items:[]},R=Object(a.createContext)(),L=Object(a.createContext)(),_=function(e,t){switch(t.type){case"TOGGLE_CART_POPUP":return Object(d.a)(Object(d.a)({},e),{},{isCartOpen:!e.isCartOpen});case"ADD_TO_CART":var n=t.payload.cartItem.id,a=null;if(e.items.map((function(e){return e.id})).includes(n)){var r=e.items.map((function(e){return e.id===n?Object(d.a)(Object(d.a)({},e),{},{quantity:e.quantity+1}):e}));a=Object(E.a)(r)}else a=[].concat(Object(E.a)(e.items),[t.payload.cartItem]);return Object(d.a)(Object(d.a)({},e),{},{items:a});case"REMOVE_FROM_CART":return Object(d.a)(Object(d.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.payload.cartItemId}))});case"CLEAR_CART":return Object(d.a)(Object(d.a)({},e),q);default:throw new Error("Unknown action: ".concat(t.type))}},U=function(e){var t=e.children,n=p("cartItems",[]),r=Object(u.a)(n,2),c=r[0],i=r[1],s={isCartOpen:!1,items:c||[]},o=Object(a.useReducer)(_,s),l=Object(u.a)(o,2),d=l[0],b=l[1];return Object(a.useEffect)((function(){i(d.items)}),[JSON.stringify(d.items)]),Object(m.jsx)(L.Provider,{value:b,children:Object(m.jsx)(R.Provider,{value:d,children:t})})},T="auth",A="shipping",F="payment",M={step:T,shippingAddress:null},G=Object(a.createContext)(),V=Object(a.createContext)(),B=function(e,t){switch(t.type){case"SET_CHECKOUT_STEP":return Object(d.a)(Object(d.a)({},e),{},{step:t.payload.step});case"SET_SHIPPING_ADDRESS":return Object(d.a)(Object(d.a)({},e),{},{shippingAddress:t.payload.shippingAddress});default:throw new Error("Unknown action: ".concat(t.type))}},K=function(e,t){return e({type:"SET_CHECKOUT_STEP",payload:{step:t}})},H=function(e){var t=e.children,n=p("checkout",null),r=Object(u.a)(n,2),c=r[0],i=r[1],s=Object(d.a)(Object(d.a)({},M),{},{shippingAddress:c||{}}),o=Object(a.useReducer)(B,s),l=Object(u.a)(o,2),b=l[0],j=l[1];return Object(a.useEffect)((function(){i(b.shippingAddress)}),[b.shippingAddress]),Object(m.jsx)(V.Provider,{value:j,children:Object(m.jsx)(G.Provider,{value:b,children:t})})},Y=n(11),J=["component","layout","isPrivate","permissions"];var W=function(e){var t=e.component,n=e.layout,r=e.isPrivate,c=void 0!==r&&r,i=e.permissions,s=Object(Y.a)(e,J),o=Object(a.useContext)(O),u=(o.user,o.hasPermissions);return Object(m.jsx)(l.b,Object(d.a)(Object(d.a)({},s),{},{render:function(e){return c&&!u(i)?Object(m.jsx)(l.a,{to:{pathname:"/auth",state:{from:e.location}}}):Object(m.jsx)(n,Object(d.a)(Object(d.a)({},e),{},{children:Object(m.jsx)(t,Object(d.a)({},e))}))}}))},Q=function(e){var t=e.children;return Object(m.jsx)("div",{className:"auth-container",children:Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("div",{className:"auth-brand",children:Object(m.jsx)(o.b,{to:"/",children:Object(m.jsx)("img",{className:"logo",src:"/logo.webp",alt:"MB Group"})})}),Object(m.jsx)("div",{children:t})]})})},Z=n(172),z=n(126),X=n(85);var ee,te,ne,ae,re,ce,ie,se,oe,le,ue,de,be,je,pe,me=function(e){var t=e.navConfig,n=Object(a.useContext)(O),r=Object(a.useContext)(g),c=Object(l.g)();return Object(m.jsx)(X.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(m.jsxs)(Z.a,{children:[Object(m.jsxs)(X.a.Brand,{children:["  ",Object(m.jsxs)(o.b,{className:"navbar-brand",to:"/",children:[" ",Object(m.jsx)("img",{className:"logo",src:"/logo.webp",alt:"MB Group",width:"35"})]})]}),Object(m.jsx)(X.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(m.jsxs)(X.a.Collapse,{id:"responsive-navbar-nav",children:[Object(m.jsx)(z.a,{className:"me-auto",children:t.map((function(e){return e.showNav&&n.hasPermissions(e.permissions)&&Object(m.jsxs)(o.b,{className:"nav-link",to:e.path,children:[" ",e.title]},e.id)}))}),Object(m.jsxs)(z.a,{children:[!n.user&&Object(m.jsxs)(o.b,{className:"nav-link",to:"/auth",children:[" ",Object(m.jsx)("img",{width:"35",src:"/login.png",alt:"login",title:"login"})]}),n.user&&Object(m.jsxs)("a",{className:"nav-link",onClick:function(e){e.preventDefault(),x(r),c.push("/"),window.location.reload()},children:[" ",Object(m.jsx)("img",{title:"logout",width:"35",src:"/logout.png",alt:"logout"})]})]})]})]})})},he=function(){var e=(new Date).getFullYear();return Object(m.jsxs)("footer",{children:[Object(m.jsxs)("p",{className:"footer-links",children:[Object(m.jsx)("a",{href:"https://github.com/sivadass/react-shopping-cart",target:"_blank",rel:"noreferrer",children:"View Source on Github"}),Object(m.jsx)("span",{children:" / "}),Object(m.jsx)("a",{href:"mailto:contact@sivadass.in",target:"_blank",rel:"noreferrer",children:"Need any help?"})]}),Object(m.jsxs)("p",{children:["\xa9 ",e," ",Object(m.jsx)("strong",{children:"MB Group"})," - Personalized Gift Store"]})]})},Oe=function(e){var t=e.children;return Object(m.jsxs)("div",{className:"common-layout",children:[Object(m.jsx)(me,{navConfig:Rn}),Object(m.jsx)("main",{style:{minHeight:"75vh"},children:t}),Object(m.jsx)(he,{})]})},ge=n(8),fe=n(16),xe=n(6),ve=n(10),ye=n(15),Ce=n.n(ye),Ne=["type","label","placeholder","className","field","form"],we=function(e){var t=e.type,n=e.label,a=e.placeholder,r=e.className,c=e.field,i=e.form,s=i.touched,o=i.errors,l=Object(Y.a)(e,Ne);return Object(m.jsxs)("div",{className:Ce()("form-group",r,{error:s[c.name]&&o[c.name]}),children:[n&&Object(m.jsx)("label",{className:"form-label",htmlFor:c.name,children:n}),Object(m.jsx)("input",Object(d.a)(Object(d.a)({type:t,className:Ce()("form-control",{"is-invalid":s[c.name]&&o[c.name]}),placeholder:a},c),l)),s[c.name]&&o[c.name]&&Object(m.jsx)("div",{className:"invalid-feedback",children:o[c.name]})]})},Se=n(17),Pe=n(350),ke=Object(Pe.a)(ee||(ee=Object(Se.a)(["\n  mutation login($phone: String!, $password: String!) {\n    login(phone: $phone, password: $password) {\n      token\n      userId\n    }\n  }\n"]))),Ie=Object(Pe.a)(te||(te=Object(Se.a)(["\n  query context($token: String!) {\n    context(token: $token) {\n      userId\n      userDetails {\n        name\n      }\n      roleDetails {\n        permissionsDetails {\n          name\n        }\n      }\n    }\n  }\n"]))),$e=Object(Pe.a)(ne||(ne=Object(Se.a)(["\n  mutation createUser($phone: String!, $name: String!, $password: String!) {\n    createUser(phone: $phone, name: $name, password: $password) {\n      id\n      phone\n      name\n    }\n  }\n"]))),De=Object(Pe.a)(ae||(ae=Object(Se.a)(["\n  query users {\n    users {\n      id\n      phone\n      name\n    }\n  }\n"]))),Ee=n(344),qe=n(345),Re=ve.a().shape({password:ve.b().required("Password is required!"),phone:ve.b().required("Mobile Number is required!")}),Le=function(){var e=Object(a.useContext)(g),t=Object(l.g)(),n=Object(l.h)(),r=Object(Ee.a)(ke),c=Object(u.a)(r,1)[0],i=Object(qe.a)(Ie),s=Object(u.a)(i,2),o=s[0],d=s[1],b=(d.loading,d.data),p=j()(n,"state.from.pathname"),h=function(e){e.preventDefault()},O=function(e){e.preventDefault(),t.push("/register")};Object(a.useEffect)((function(){b&&f(b)}),[b]);var f=function(n){!function(e,t){localStorage.setItem("user",JSON.stringify(t)),e({type:"LOGIN_SUCCESS",payload:{user:t}})}(e,n),p?t.push(p):t.push("/"),window.location.reload()};return Object(m.jsx)(xe.c,{initialValues:{phone:"",password:""},validationSchema:Re,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t,n){var a,r,i;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.resetForm,e.prev=1,e.next=4,c({variables:t});case 4:i=e.sent,o({variables:{token:null===i||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.login)||void 0===r?void 0:r.token}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(){return Object(m.jsxs)(xe.b,{children:[Object(m.jsx)(xe.a,{name:"phone",type:"text",placeholder:"Mobile Number",component:we}),Object(m.jsx)(xe.a,{name:"password",type:"password",placeholder:"Password",component:we}),Object(m.jsx)("p",{children:Object(m.jsx)("a",{href:"/#",onClick:h,children:"Forgot Password?"})}),Object(m.jsx)("button",{className:"auth-button block",onClick:function(){},children:"Login"}),Object(m.jsxs)("p",{children:["New here?"," ",Object(m.jsx)("a",{href:"/#",onClick:O,children:"Sign Up Now!"})]})]})}})},_e="https://api.mbgroup.shop/static",Ue="https://api.mbgroup.shop/file/upload",Te=n(101),Ae="EDIT_CATEGORY",Fe="DELETE_CATEGORY",Me="CREATE_CATEGORY",Ge="EDIT_PRODUCT",Ve="DELETE_PRODUCT",Be="CREATE_PRODUCT",Ke="CREATE_PERMISSION",He="CREATE_ROLE",Ye="CREATE_USER_ROLE",Je="RESELLER",We=n(178),Qe=n.n(We),Ze=function(e){var t=e.data,n=e.onPreview,r=e.onClick,c=e.onDelete,i=e.onEdit,s=Object(a.useState)(!1),o=Object(u.a)(s,2),l=(o[0],o[1],Object(a.useContext)(L),Object(a.useContext)(O)),d=t.categoryImage,b=t.images,j=t.name,p=t.price,h=t.shippingCharges,g=t.wholeSalePrice;return Object(m.jsxs)("div",{className:"product ".concat(r?"category":""),onClick:function(){return r&&r(t)},children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"product-image",children:Object(m.jsx)("img",{src:"".concat(_e,"/").concat(d||b&&b[0]),alt:j,onClick:function(){return n&&n(t)}})}),j&&Object(m.jsx)("h4",{className:"product-name",children:j}),Object(m.jsxs)("div",{children:[" ",p&&Object(m.jsx)("p",{className:"product-price",children:l.hasPermissions(Je)?g:p}),h&&Object(m.jsxs)("p",{className:"product-price shipping-charges",children:[h||0," (Shipping Charges)"]})]}),l.hasPermissions([Fe,Ve])&&Object(m.jsx)("button",{className:"outline delete-icon",onClick:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(n){return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.stopPropagation(),Object(Te.confirmAlert)({title:"Confirm to Delete",message:"Are you sure you want to delete?.",buttons:[{label:"Yes",onClick:function(){return c(t)}},{label:"No",onClick:function(){return{}}}]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(m.jsx)("i",{className:"rsc-icon-delete"})}),l.hasPermissions([Ae,Ge])&&Object(m.jsx)("button",{className:"outline edit-icon",onClick:function(e){e.stopPropagation(),i(t)},children:Object(m.jsx)("i",{className:"rsc-icon-edit"})}),!1]}),n&&Object(m.jsx)(Qe.a,{className:"whatsapp",number:"+91-9818855029",message:"".concat(window.location.href,"?productId=").concat(t.id),children:Object(m.jsx)("img",{src:"/whatsapp.png",width:"50",alt:"whatsapp"})})]})},ze=n(183),Xe=Object(Pe.a)(re||(re=Object(Se.a)(["\n  mutation createCategory($name: String!, $categoryImage: String!) {\n    createCategory(name: $name, categoryImage: $categoryImage) {\n      id\n      name\n      categoryImage\n    }\n  }\n"]))),et=Object(Pe.a)(ce||(ce=Object(Se.a)(["\n  mutation editCategory(\n    $name: String!\n    $categoryImage: String\n    $categoryId: ID!\n  ) {\n    editCategory(\n      categoryId: $categoryId\n      name: $name\n      categoryImage: $categoryImage\n    )\n  }\n"]))),tt=Object(Pe.a)(ie||(ie=Object(Se.a)(["\n  query categories {\n    categories {\n      id\n      name\n      categoryImage\n      subCategories {\n        id\n        name\n        category\n      }\n    }\n  }\n"]))),nt=Object(Pe.a)(se||(se=Object(Se.a)(["\n  query category($id: ID!) {\n    category(id: $id) {\n      id\n      name\n      categoryImage\n      subCategories {\n        id\n        name\n        category\n      }\n    }\n  }\n"]))),at=Object(Pe.a)(oe||(oe=Object(Se.a)(["\n  mutation deleteCategory($id: ID!) {\n    deleteCategory(id: $id)\n  }\n"]))),rt=function(){var e=Object(l.g)(),t=Object(ze.b)(tt),n=t.loading,r=t.data,c=(r=void 0===r?{}:r).categories,i=t.refetch,s=Object(Ee.a)(at),o=Object(u.a)(s,1)[0];Object(a.useEffect)((function(){i()}),[]);var d=function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t){return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{id:t.id}});case 2:return e.next=4,i();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(t){e.push("/categories/".concat(t.id))};return n?Object(m.jsx)("div",{className:"products-wrapper",children:Object(m.jsx)("h1",{children:"Loading..."})}):Object(m.jsx)("div",{className:"products-wrapper",children:Object(m.jsx)("div",{className:"container products",children:c&&c.map((function(t){return Object(m.jsx)(Ze,{onEdit:b,onDelete:d,data:t,onClick:function(){return function(t){e.push("/products/".concat(t.id))}(t)}},t.id)}))})})},ct=n(179),it=void 0,st=function(e){var t=Object(a.useRef)(),n=Object(a.useContext)(O);Object(a.useEffect)((function(){return document.addEventListener("click",r.bind(it),!0),function(){document.removeEventListener("click",r.bind(it),!0)}}),[]);var r=function(n){var a=Object(c.findDOMNode)(t.current);a&&a.contains(n.target)||e.closeModal()},i=e.product,s=(i.categoryImage,i.images);return Object(m.jsx)("div",{className:e.openModal?"modal-wrapper active":"modal-wrapper",children:Object(m.jsxs)("div",{className:"modal1",ref:t,children:[Object(m.jsx)("button",{type:"button",className:"close",onClick:function(){e.closeModal()}.bind(it),children:"\xd7"}),Object(m.jsxs)("div",{className:"quick-view",children:[Object(m.jsxs)("div",{className:"quick-view-image",children:[Object(m.jsx)(ct.Carousel,{showArrows:!1,infiniteLoop:!0,showThumbs:!1,showStatus:!0,autoFocus:!1,children:s.map((function(t,n){return Object(m.jsx)("img",{src:"".concat(_e,"/").concat(t),alt:e.product.name},n)}))}),e.product.productDescription&&Object(m.jsx)("p",{className:"product-description",dangerouslySetInnerHTML:{__html:e.product.productDescription}})]}),Object(m.jsxs)("div",{className:"quick-view-details",children:[Object(m.jsx)("span",{className:"product-name",children:e.product.name}),e.product.price&&Object(m.jsx)("span",{className:"product-price",children:(n.hasPermissions(Permissions.RESELLER)?Number(e.product.wholeSalePrice):Number(e.product.price))+Number(e.product.shippingCharges)})]})]})]})})},ot=Object(Pe.a)(le||(le=Object(Se.a)(["\n  query products($categoryId: ID!) {\n    products: productsByCategory(categoryId: $categoryId) {\n      id\n      name\n      price\n      wholeSalePrice\n      images\n      productDescription\n      subCategory\n      shippingCharges\n      subCategoryDetails {\n        id\n        name\n        category\n        categoryDetails {\n          id\n          name\n          categoryImage\n        }\n      }\n    }\n  }\n"]))),lt=Object(Pe.a)(ue||(ue=Object(Se.a)(["\n  query product($id: ID!) {\n    product(id: $id) {\n      id\n      name\n      price\n      wholeSalePrice\n      images\n      productDescription\n      subCategory\n      shippingCharges\n      subCategoryDetails {\n        id\n        name\n        category\n        categoryDetails {\n          id\n          name\n          categoryImage\n          subCategories {\n            id\n            name\n            category\n          }\n        }\n      }\n    }\n  }\n"]))),ut=Object(Pe.a)(de||(de=Object(Se.a)(["\n  mutation editProduct(\n    $id: ID!\n    $name: String!\n    $price: String!\n    $images: [String]!\n    $subCategory: String!\n    $wholeSalePrice: String!\n    $productDescription: String!\n    $shippingCharges: String!\n  ) {\n    editProduct(\n      id: $id\n      name: $name\n      price: $price\n      images: $images\n      subCategory: $subCategory\n      wholeSalePrice: $wholeSalePrice\n      productDescription: $productDescription\n      shippingCharges: $shippingCharges\n    )\n  }\n"]))),dt=Object(Pe.a)(be||(be=Object(Se.a)(["\n  mutation createProduct(\n    $name: String!\n    $price: String!\n    $images: [String]!\n    $subCategory: String!\n    $wholeSalePrice: String!\n    $productDescription: String!\n    $shippingCharges: String!\n  ) {\n    createProduct(\n      name: $name\n      price: $price\n      images: $images\n      subCategory: $subCategory\n      wholeSalePrice: $wholeSalePrice\n      productDescription: $productDescription\n      shippingCharges: $shippingCharges\n    ) {\n      id\n      name\n      price\n      wholeSalePrice\n      images\n      subCategory\n      productDescription\n      shippingCharges\n    }\n  }\n"]))),bt=Object(Pe.a)(je||(je=Object(Se.a)(["\n  mutation deleteProduct($id: ID!) {\n    deleteProduct(id: $id)\n  }\n"]))),jt=function(e){var t,n=e.match,r=Object(a.useContext)(C).searchKeyword,c=Object(l.g)(),i=Object(ze.b)(ot,{variables:{categoryId:null===n||void 0===n||null===(t=n.params)||void 0===t?void 0:t.categoryId}}),s=i.loading,o=(i.error,i.data),d=void 0===o?{}:o,b=i.refetch,j=new Proxy(new URLSearchParams(c.location.search),{get:function(e,t){return e.get(t)}});Object(a.useEffect)((function(){b()}),[]);var p=Object(Ee.a)(bt),h=Object(u.a)(p,1)[0],O=Object(a.useState)(null),g=Object(u.a)(O,2),f=g[0],x=g[1],v=Object(a.useState)(!1),y=Object(u.a)(v,2),N=y[0],w=y[1],S=d.products,P=S&&S.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())||!r}));j.productId&&(P=P&&P.filter((function(e){return e.id===j.productId})));var k=function(e){x(e),w(!0)},I=function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t){return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({variables:{id:t.id}});case 2:return e.next=4,b();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){c.push("/editProduct/".concat(e.id))};return s?Object(m.jsx)("div",{className:"products-wrapper",children:Object(m.jsx)("h1",{children:"Loading..."})}):Object(m.jsxs)("div",{className:"products-wrapper",children:[Object(m.jsx)("div",{className:"container products",children:S&&P.map((function(e){return Object(m.jsx)(Ze,{onEdit:$,onDelete:I,onPreview:k,data:e},e.id)}))}),f&&Object(m.jsx)(st,{product:f,openModal:N,closeModal:function(){w(!1)}})]})},pt=ve.a().shape({password:ve.b().required("Password is required!"),phone:ve.b().required("Mobile Number is required!"),name:ve.b().required("Name is required!")}),mt=function(){var e=Object(l.g)(),t=Object(l.h)(),n=Object(Ee.a)($e),a=Object(u.a)(n,1)[0],r=j()(t,"state.from.pathname"),c=function(t){t.preventDefault(),e.push("/auth")};return Object(m.jsx)(xe.c,{initialValues:{phone:"",password:"",name:""},validationSchema:pt,onSubmit:function(){var t=Object(fe.a)(Object(ge.a)().mark((function t(n,c){return Object(ge.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.resetForm,t.prev=1,t.next=4,a({variables:n});case 4:t.sent&&(r?e.push(r):e.push("/auth")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(){return Object(m.jsxs)(xe.b,{children:[Object(m.jsx)(xe.a,{name:"phone",type:"text",placeholder:"Mobile Number",component:we}),Object(m.jsx)(xe.a,{name:"name",type:"name",placeholder:"Name",component:we}),Object(m.jsx)(xe.a,{name:"password",type:"password",placeholder:"Password",component:we}),Object(m.jsx)("button",{className:"auth-button block",onClick:function(){},children:"Register"}),Object(m.jsxs)("p",{children:["Already Registered?"," ",Object(m.jsx)("a",{href:"/#",onClick:c,children:"Login Now!"})]})]})}})},ht=ve.a().shape({fullName:ve.b().required("Full Name is required"),phoneNumber:ve.b().required("Phone Number is required").matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,"Phone Number is not a valid 10 digit number").min(10,"Phone Number is too short").max(10,"Phone Number is too long"),addressLine:ve.b().required("Door No. & Street is required!"),city:ve.b().required("City is required!"),state:ve.b().required("State is required!"),code:ve.b().required("ZIP/Postal code is required!"),country:ve.b().required("Country is required!")}),Ot=function(){var e,t,n=Object(l.g)(),r=Object(a.useContext)(O),c=r.user,i=r.isLoggedIn,s=Object(a.useContext)(g),o=Object(a.useContext)(V);return Object(m.jsxs)("div",{className:"detail-container",children:[Object(m.jsx)("h2",{children:"Sign In now!"}),Object(m.jsx)("div",{className:"auth-message",children:i?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{children:["Logged in as ",Object(m.jsx)("span",{children:null===c||void 0===c||null===(e=c.context)||void 0===e||null===(t=e.userDetails)||void 0===t?void 0:t.name})]}),Object(m.jsx)("button",{onClick:function(){return x(s),void n.push("/auth")},children:"Login as Different User"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"Please login to continue."}),Object(m.jsx)("button",{onClick:function(){n.push("/auth")},children:"Login"})]})}),Object(m.jsxs)("div",{className:"actions",children:[Object(m.jsxs)("button",{className:"outline",onClick:function(){n.push("/")},children:[Object(m.jsx)("i",{className:"rsc-icon-arrow_back"})," Continue Shopping"]}),Object(m.jsxs)("button",{disabled:!i,onClick:function(){K(o,A)},children:["Proceed",Object(m.jsx)("i",{className:"rsc-icon-arrow_forward"})]})]})]})},gt=function(){var e=Object(a.useContext)(V),t=function(t){var n;(n=e)({type:"SET_SHIPPING_ADDRESS",payload:{shippingAddress:t}}),K(n,F)};return Object(m.jsxs)("div",{className:"detail-container",children:[Object(m.jsx)("h2",{children:"Shipping Address"}),Object(m.jsx)(xe.c,{initialValues:{fullName:"John Doe",phoneNumber:"5552229876",addressLine:"L1, Palm Residency",city:"Kingston",state:"New York",code:"12401",country:"United States"},validationSchema:ht,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(n,a){var r,c;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.resetForm;try{c=Object(d.a)({},n),r(),t(c)}catch(i){console.error(i)}case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(){return Object(m.jsxs)(xe.b,{children:[Object(m.jsxs)("div",{className:"field-group",children:[Object(m.jsx)(xe.a,{name:"fullName",type:"text",placeholder:"Full Name",component:we}),Object(m.jsx)(xe.a,{name:"phoneNumber",type:"text",placeholder:"Phone Number",component:we})]}),Object(m.jsx)(xe.a,{name:"addressLine",type:"text",placeholder:"Door No. & Street",component:we}),Object(m.jsxs)("div",{className:"field-group",children:[Object(m.jsx)(xe.a,{name:"city",type:"text",placeholder:"City",component:we}),Object(m.jsx)(xe.a,{name:"state",type:"text",placeholder:"State",component:we})]}),Object(m.jsxs)("div",{className:"field-group",children:[Object(m.jsx)(xe.a,{name:"code",type:"text",placeholder:"ZIP/Postal Code",component:we}),Object(m.jsx)(xe.a,{name:"country",type:"text",placeholder:"Country",component:we})]}),Object(m.jsxs)("div",{className:"actions",children:[Object(m.jsxs)("button",{type:"button",className:"outline",onClick:function(){K(e,T)},children:[Object(m.jsx)("i",{className:"rsc-icon-arrow_back"})," Login in as Different User"]}),Object(m.jsxs)("button",{type:"submit",children:["Save Address",Object(m.jsx)("i",{className:"rsc-icon-arrow_forward"})]})]})]})}})]})},ft=function(){var e=Object(a.useContext)(G).shippingAddress,t=Object(a.useContext)(V);return Object(m.jsxs)("div",{className:"detail-container",children:[Object(m.jsx)("h2",{children:"Payment"}),Object(m.jsxs)("div",{className:"actions",children:[Object(m.jsxs)("button",{type:"button",className:"outline",onClick:function(){K(t,A)},children:[Object(m.jsx)("i",{className:"rsc-icon-arrow_back"})," Back to Shipping Details"]}),Object(m.jsxs)("button",{disabled:!e,onClick:function(){},children:["Save Address",Object(m.jsx)("i",{className:"rsc-icon-arrow_forward"})]})]})]})},xt=function(){var e=Object(a.useContext)(R).items,t=void 0===e?[]:e,n=Object(a.useContext)(O).isLoggedIn,r=Object(a.useContext)(G),c=r.step,i=r.shippingAddress,s=Object(a.useContext)(V),o=t.length,l=function(e){K(s,e)};return Object(m.jsx)("div",{className:"checkout-page",children:Object(m.jsxs)("div",{className:"container1",children:[Object(m.jsxs)("div",{className:"order-details",children:[Object(m.jsxs)("ul",{className:"timeline",children:[Object(m.jsxs)("li",{className:Ce()({done:n,active:c===T}),onClick:function(){return l(T)},children:[Object(m.jsx)("h2",{children:"Sign In"}),Object(m.jsx)("i",{className:"rsc-icon-check_circle"})]}),Object(m.jsxs)("li",{className:Ce()({done:null!==i,active:c===A}),onClick:function(){return l(A)},children:[Object(m.jsx)("h2",{children:"Shipping"}),Object(m.jsx)("i",{className:"rsc-icon-check_circle"})]}),Object(m.jsxs)("li",{className:Ce()({done:!1,active:c===F}),onClick:function(){return l(F)},children:[Object(m.jsx)("h2",{children:"Payment"}),Object(m.jsx)("i",{className:"rsc-icon-check_circle"})]})]}),c===T&&Object(m.jsx)(Ot,{}),c===A&&Object(m.jsx)(gt,{}),c===F&&Object(m.jsx)(ft,{})]}),Object(m.jsxs)("div",{className:"order-summary",children:[Object(m.jsxs)("h2",{children:["Summary",Object(m.jsx)("span",{children:" (".concat(o,") Items")})]}),Object(m.jsx)("ul",{className:"cart-items",children:t.map((function(e){return Object(m.jsxs)("li",{className:"cart-item",children:[Object(m.jsx)("img",{className:"product-image",src:e.image}),Object(m.jsxs)("div",{className:"product-info",children:[Object(m.jsx)("p",{className:"product-name",children:e.name}),Object(m.jsx)("p",{className:"product-price",children:e.price})]}),Object(m.jsxs)("div",{className:"product-total",children:[Object(m.jsx)("p",{className:"quantity",children:"".concat(e.quantity," ").concat(e.quantity>1?"Nos.":"No.")}),Object(m.jsx)("p",{className:"amount",children:e.quantity*e.price})]})]},e.name)}))}),Object(m.jsxs)("ul",{className:"total-breakup",children:[Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Subtotal"}),Object(m.jsx)("p",{children:"5000"})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Tax"}),Object(m.jsx)("p",{children:"5000"})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{children:"Shipping"}),Object(m.jsx)("p",{children:"5000"})]}),Object(m.jsxs)("li",{children:[Object(m.jsx)("h2",{children:"Total"}),Object(m.jsx)("h2",{children:"5000"})]})]})]})]})})},vt=n(182),yt=["options","multi","type","label","placeholder","field","form","required","className"],Ct=function(e){var t=e.options,n=e.multi,a=void 0!==n&&n,r=(e.type,e.label),c=e.placeholder,i=e.field,s=e.form,o=s.touched,l=s.errors,u=s.setFieldValue,b=(e.required,e.className),j=Object(Y.a)(e,yt);o[i.name]&&l[i.name];return Object(m.jsxs)("div",{className:Ce()("form-group",b,{error:o[i.name]&&l[i.name]}),children:[r&&Object(m.jsx)("label",{className:"form-label",htmlFor:i.name,children:r}),Object(m.jsx)(vt.a,Object(d.a)({options:t,isMulti:a,value:t?a?t.filter((function(e){return i.value.indexOf(e.value)>=0})):t.find((function(e){return e.value===i.value})):a?[]:"",onChange:function(e){u(i.name,a?e.map((function(e){return e.value})):e.value)},name:i.name,className:Ce()({"is-invalid":o[i.name]&&l[i.name]}),placeholder:c},j)),o[i.name]&&l[i.name]&&Object(m.jsx)("div",{className:"invalid-feedback",children:l[i.name]})]})},Nt=["label","placeholder","className","field","form"],wt=function(e){var t=e.label,n=e.placeholder,a=e.className,r=e.field,c=e.form,i=c.touched,s=c.errors,o=Object(Y.a)(e,Nt);return Object(m.jsxs)("div",{className:Ce()("form-group",a,{error:i[r.name]&&s[r.name]}),children:[t&&Object(m.jsx)("label",{className:"form-label",htmlFor:r.name,children:t}),Object(m.jsx)("textarea",Object(d.a)(Object(d.a)({className:Ce()("form-control",{"is-invalid":i[r.name]&&s[r.name]}),placeholder:n},r),o)),i[r.name]&&s[r.name]&&Object(m.jsx)("div",{className:"invalid-feedback",children:s[r.name]})]})},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new FormData;return Object.values(e).forEach((function(e){t.append("picture",e)})),fetch(Ue,{body:t,method:"post"})},Pt=ve.a().shape({name:ve.b().required("Name is required!"),price:ve.b().required("Price is required!"),shippingCharges:ve.b().required("Shipping Charges is required!"),wholeSalePrice:ve.b().required("Price is required!"),subCategory:ve.b().required("Sub Category is required!"),productDescription:ve.b().required("Product Description is required!")}),kt=function(){var e=Object(ze.b)(tt),t=(e.loading,e.error,e.data),n=void 0===t?{}:t,a=Object(Ee.a)(dt),r=Object(u.a)(a,1)[0],c=n.categories,i=void 0===c?[]:c;return Object(m.jsx)(xe.c,{initialValues:{name:"",price:"",wholeSalePrice:"",category:[],subCategory:"",shippingCharges:"",images:[],productDescription:"",file:[]},validationSchema:Pt,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t,n){var a;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.resetForm,e.prev=1,e.next=4,r({variables:t});case 4:a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.values,n=e.setFieldValue;return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"name",type:"text",placeholder:"Product Name",component:we}),Object(m.jsx)(xe.a,{name:"price",type:"text",placeholder:"Price",component:we}),Object(m.jsx)(xe.a,{name:"wholeSalePrice",type:"text",placeholder:"Whole Sale Price",component:we}),Object(m.jsx)(xe.a,{name:"shippingCharges",type:"text",placeholder:"Shipping Charges",component:we}),Object(m.jsx)(xe.a,{name:"productDescription",type:"text",placeholder:"Product Description",component:wt}),Object(m.jsx)(xe.a,{name:"category",type:"text",placeholder:"Category",component:Ct,options:i.map((function(e){return{name:e.name,value:e.subCategories,label:e.name}}))}),Object(m.jsx)(xe.a,{name:"subCategory",type:"text",placeholder:"Sub Category",component:Ct,options:(t.category||[]).map((function(e){return{name:e.name,value:e.id,label:e.name}}))}),Object(m.jsx)(xe.a,{name:"file",type:"file",value:void 0,placeholder:"Images",component:we,multiple:!0,accept:"image/*, video/*",onChange:function(e){n("file",e.currentTarget.files)}}),Object(m.jsx)("button",{disabled:0===t.file.length||0!==t.images.length,className:"auth-button block",onClick:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(a){var r,c,i;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),a.stopPropagation(),e.next=4,St(t.file);case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,i=c.data.files,n("images",void 0===i?[]:i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Upload Image"}),Object(m.jsx)("button",{className:"auth-button block",disabled:0===t.images.length,onClick:function(){},children:"Create Product"})]})}})},It=ve.a().shape({name:ve.b().required("Name is required!")}),$t=function(){Object(a.useContext)(g),Object(l.g)(),Object(l.h)();var e=Object(Ee.a)(Xe),t=Object(u.a)(e,1)[0];return Object(m.jsx)(xe.c,{initialValues:{name:"",categoryImage:"",file:[]},validationSchema:It,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(n,a){var r;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.resetForm,e.prev=1,e.next=4,t({variables:n});case 4:r(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.values,a=e.setFieldValue;return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"name",type:"text",placeholder:"Category Name",component:we}),Object(m.jsx)(xe.a,{name:"categoryImage",type:"file",placeholder:"Category Image",component:we,value:void 0,accept:"image/png, image/gif, image/jpeg",onChange:function(e){a("file",e.currentTarget.files)}}),Object(m.jsx)("button",{disabled:0===n.file.length||n.categoryImage,className:"auth-button block",onClick:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t){var r,c,i;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),e.next=4,St(n.file);case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,i=c.data.files,a("categoryImage",(void 0===i?[]:i)[0]);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Upload Image"}),Object(m.jsx)("button",{className:"auth-button block",disabled:t||!n.categoryImage,onClick:function(){},children:"Create Category"})]})}})},Dt=Object(Pe.a)(pe||(pe=Object(Se.a)(["\n  mutation createSubCategory($name: String!, $category: String!) {\n    createSubCategory(name: $name, category: $category) {\n      id\n      name\n      category\n      categoryDetails {\n        name\n        id\n        categoryImage\n      }\n    }\n  }\n"]))),Et=ve.a().shape({name:ve.b().required("Name is required!"),category:ve.b().required("Category is required!")}),qt=function(){Object(a.useContext)(g);var e=Object(ze.b)(tt),t=(e.loading,e.error,e.data),n=void 0===t?{}:t,r=(Object(l.g)(),Object(l.h)(),Object(Ee.a)(Dt)),c=Object(u.a)(r,1)[0],i=n.categories,s=void 0===i?[]:i;return Object(m.jsx)(xe.c,{initialValues:{name:"",category:""},validationSchema:Et,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t,n){var a;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.resetForm,e.prev=1,e.next=4,c({variables:t});case 4:a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(){return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"name",type:"text",placeholder:"Sub Category Name",component:we}),Object(m.jsx)(xe.a,{name:"category",type:"text",placeholder:"Category",component:Ct,options:s.map((function(e){return{name:e.name,value:e.id,label:e.name}}))}),Object(m.jsx)("button",{className:"auth-button block",onClick:function(){},children:"Create Sub Category"})]})}})},Rt=n(180),Lt=["__typename"];var _t,Ut,Tt,At,Ft,Mt,Gt,Vt,Bt,Kt,Ht,Yt,Jt,Wt,Qt,Zt=function(e){var t=e.data,n=e.onEdit,a=e.onDelete,r=e.disableActions,c=t[0],i=(c.__typename,Object(Y.a)(c,Lt)),s=function(e,t){return"string"===typeof e[t]?e[t]:Array.isArray(e[t])?"string"===typeof e[t][0]?e[t].join(" , "):e[t].map((function(e){return e.name})).join(" , "):"object"===typeof e[t]?e[t].name:void 0};return Object(m.jsxs)(Rt.a,{responsive:"sm",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object.keys(i).map((function(e,t){return Object(m.jsx)("th",{children:e},e+t)})),!r&&Object(m.jsx)("th",{children:"Edit"}),!r&&Object(m.jsx)("th",{children:"Delete"})]})}),Object(m.jsx)("tbody",{children:t.map((function(e,t){return Object(m.jsxs)("tr",{children:[Object.keys(i).map((function(n){return Object(m.jsx)("td",{children:s(e,n)},n+t)})),!r&&Object(m.jsxs)("td",{children:[" ",Object(m.jsx)("button",{className:"outline edit-icon",onClick:function(t){t.stopPropagation(),n(e)},children:Object(m.jsx)("i",{className:"rsc-icon-edit"})})]}),!r&&Object(m.jsxs)("td",{children:[" ",Object(m.jsx)("button",{className:"outline delete-icon",onClick:function(){var t=Object(fe.a)(Object(ge.a)().mark((function t(n){return Object(ge.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),Object(Te.confirmAlert)({title:"Confirm to Delete",message:"Are you sure you want to delete?.",buttons:[{label:"Yes",onClick:function(){return a(e)}},{label:"No",onClick:function(){return{}}}]});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:Object(m.jsx)("i",{className:"rsc-icon-delete"})})]})]},t)}))})]})},zt=Object(Pe.a)(_t||(_t=Object(Se.a)(["\n  mutation createPermission($name: String!) {\n    createPermission(name: $name) {\n      id\n      name\n    }\n  }\n"]))),Xt=Object(Pe.a)(Ut||(Ut=Object(Se.a)(["\n  query permission($id: ID!) {\n    permission(id: $id) {\n      id\n      name\n    }\n  }\n"]))),en=Object(Pe.a)(Tt||(Tt=Object(Se.a)(["\n  query permissions {\n    permissions {\n      id\n      name\n    }\n  }\n"]))),tn=Object(Pe.a)(At||(At=Object(Se.a)(["\n  mutation deletePermission($id: ID!) {\n    deletePermission(id: $id)\n  }\n"]))),nn=Object(Pe.a)(Ft||(Ft=Object(Se.a)(["\n  mutation editPermission($name: String!, $id: ID!) {\n    editPermission(id: $id, name: $name)\n  }\n"]))),an=function(){var e=Object(a.useContext)(C).searchKeyword,t=Object(l.g)(),n=Object(ze.b)(en),r=n.loading,c=(n.error,n.data),i=void 0===c?{}:c,s=n.refetch,d=new Proxy(new URLSearchParams(t.location.search),{get:function(e,t){return e.get(t)}});Object(a.useEffect)((function(){s()}),[]);var b=Object(Ee.a)(tn),j=Object(u.a)(b,1)[0],p=Object(a.useState)(null),h=Object(u.a)(p,2),O=(h[0],h[1],Object(a.useState)(!1)),g=Object(u.a)(O,2),f=(g[0],g[1],i.products),x=f&&f.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())||!e}));d.productId&&(x=x&&x.filter((function(e){return e.id===d.productId})));var v=function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t){return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({variables:{id:t.id}});case 2:return e.next=4,s();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?Object(m.jsx)("div",{className:"products-wrapper",children:Object(m.jsx)("h1",{children:"Loading..."})}):Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(o.b,{to:"/createPermission",className:"btn btn-dark",style:{width:"200px"},children:"Create Permission"}),Object(m.jsx)(Zt,{onEdit:function(e){t.push("/editPermission/".concat(e.id))},data:i.permissions,onDelete:v})]})},rn=ve.a().shape({name:ve.b().required("Name is required!")}),cn=function(){var e=Object(Ee.a)(zt),t=Object(u.a)(e,1)[0],n=Object(l.g)();return Object(m.jsx)(xe.c,{initialValues:{name:""},validationSchema:rn,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(a,r){var c;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.resetForm,e.prev=1,e.next=4,t({variables:a});case 4:c(),n.push("/permissions"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(){return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"name",type:"text",placeholder:"Permission Name",component:we}),Object(m.jsx)("button",{className:"auth-button block",onClick:function(){},children:"Create Permission"})]})}})},sn=ve.a().shape({name:ve.b().required("Name is required!")}),on=function(e){var t,n=e.match,a=Object(Ee.a)(nn),r=Object(u.a)(a,1)[0],c=Object(l.g)(),i=Object(ze.b)(Xt,{variables:{id:null===n||void 0===n||null===(t=n.params)||void 0===t?void 0:t.id}}),s=i.loading,o=(i.error,i.data),b=void 0===o?{}:o;return s?null:Object(m.jsx)(xe.c,{initialValues:Object(d.a)({name:""},b.permission),validationSchema:sn,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t,n){var a;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.resetForm,e.prev=1,e.next=4,r({variables:t});case 4:a(),c.push("/permissions"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(){return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"name",type:"text",placeholder:"Permission Name",component:we}),Object(m.jsx)("button",{className:"auth-button block",onClick:function(){},children:"Update Permission"})]})}})},ln=Object(Pe.a)(Mt||(Mt=Object(Se.a)(["\n  mutation createRole($name: String!, $permissions: [String]) {\n    createRole(name: $name, permissions: $permissions) {\n      id\n      name\n    }\n  }\n"]))),un=Object(Pe.a)(Gt||(Gt=Object(Se.a)(["\n  query roles {\n    roles {\n      id\n      name\n      permissions\n      permissionsDetails {\n        name\n      }\n    }\n  }\n"]))),dn=Object(Pe.a)(Vt||(Vt=Object(Se.a)(["\n  query role($id: ID!) {\n    role(id: $id) {\n      id\n      name\n      permissionsDetails {\n        name\n        id\n      }\n    }\n  }\n"]))),bn=Object(Pe.a)(Bt||(Bt=Object(Se.a)(["\n  mutation deleteRole($id: ID!) {\n    deleteRole(id: $id)\n  }\n"]))),jn=Object(Pe.a)(Kt||(Kt=Object(Se.a)(["\n  mutation editRole($name: String!, $permissions: [String], $id: ID!) {\n    editRole(id: $id, name: $name, permissions: $permissions)\n  }\n"]))),pn=ve.a().shape({name:ve.b().required("Name is required!")}),mn=function(){Object(a.useContext)(g);var e=Object(ze.b)(en),t=(e.loading,e.error,e.data),n=void 0===t?{}:t,r=Object(l.g)(),c=(Object(l.h)(),Object(Ee.a)(ln)),i=Object(u.a)(c,1)[0],s=n.permissions,o=void 0===s?[]:s;return Object(m.jsx)(xe.c,{initialValues:{name:"",permissions:""},validationSchema:pn,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t,n){var a;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.resetForm,e.prev=1,e.next=4,i({variables:t});case 4:a(),r.push("/roles"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(){return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"name",type:"text",placeholder:"Role Name",component:we}),Object(m.jsx)(xe.a,{name:"permissions",type:"text",placeholder:"Permissions",component:Ct,options:o.map((function(e){return{name:e.name,value:e.id,label:e.name}})),multi:!0}),Object(m.jsx)("button",{className:"auth-button block",onClick:function(){},children:"Create Role"})]})}})},hn=ve.a().shape({name:ve.b().required("Name is required!")}),On=function(e){var t,n=e.match,r=(Object(a.useContext)(g),Object(ze.b)(en)),c=(r.loading,r.error,r.data),i=void 0===c?{}:c,s=Object(ze.b)(dn,{variables:{id:null===n||void 0===n||null===(t=n.params)||void 0===t?void 0:t.id}}),o=s.loading,b=s.data,j=void 0===b?{}:b,p=Object(l.g)(),h=(Object(l.h)(),Object(Ee.a)(jn)),O=Object(u.a)(h,1)[0];if(o)return null;var f=i.permissions,x=void 0===f?[]:f;return Object(m.jsx)(xe.c,{initialValues:Object(d.a)(Object(d.a)({name:"",permissions:""},j.role),{},{permissions:j.role.permissionsDetails.map((function(e){return e.id}))}),validationSchema:hn,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t,n){var a;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.resetForm,e.prev=1,e.next=4,O({variables:t});case 4:a(),p.push("/roles"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(){return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"name",type:"text",placeholder:"Role Name",component:we}),Object(m.jsx)(xe.a,{name:"permissions",type:"text",placeholder:"Permissions",component:Ct,options:x.map((function(e){return{name:e.name,value:e.id,label:e.name}})),multi:!0}),Object(m.jsx)("button",{className:"auth-button block",onClick:function(){},children:"Update Role"})]})}})},gn=function(){var e=Object(a.useContext)(C).searchKeyword,t=Object(l.g)(),n=Object(ze.b)(un),r=n.loading,c=(n.error,n.data),i=void 0===c?{}:c,s=n.refetch,d=new Proxy(new URLSearchParams(t.location.search),{get:function(e,t){return e.get(t)}});Object(a.useEffect)((function(){s()}),[]);var b=Object(Ee.a)(bn),j=Object(u.a)(b,1)[0],p=Object(a.useState)(null),h=Object(u.a)(p,2),O=(h[0],h[1],Object(a.useState)(!1)),g=Object(u.a)(O,2),f=(g[0],g[1],i.products),x=f&&f.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())||!e}));d.productId&&(x=x&&x.filter((function(e){return e.id===d.productId})));var v=function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t){return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({variables:{id:t.id}});case 2:return e.next=4,s();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?Object(m.jsx)("div",{className:"products-wrapper",children:Object(m.jsx)("h1",{children:"Loading..."})}):Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(o.b,{to:"/createRole",className:"btn btn-dark",style:{width:"200px"},children:"Create Role"}),Object(m.jsx)(Zt,{onEdit:function(e){t.push("/editRole/".concat(e.id))},data:i.roles,onDelete:v})]})},fn=ve.a().shape({name:ve.b().required("Name is required!")}),xn=function(e){var t,n=e.match,r=(Object(a.useContext)(g),Object(l.g)()),c=(Object(l.h)(),Object(Ee.a)(et)),i=Object(u.a)(c,1)[0],s=Object(ze.b)(nt,{variables:{id:null===n||void 0===n||null===(t=n.params)||void 0===t?void 0:t.categoryId}}),o=s.loading,b=(s.error,s.data),j=void 0===b?{}:b;return o?null:Object(m.jsx)(xe.c,{initialValues:Object(d.a)({name:"",categoryImage:"",file:[]},j.category),validationSchema:fn,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t,a){var c;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.resetForm,e.prev=1,e.next=4,i({variables:Object(d.a)(Object(d.a)({},t),{},{categoryId:null===n||void 0===n||null===(c=n.params)||void 0===c?void 0:c.categoryId})});case 4:r.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.values,a=e.setFieldValue;return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"name",type:"text",placeholder:"Category Name",component:we}),Object(m.jsx)(xe.a,{name:"categoryImage",type:"file",placeholder:"Category Image",component:we,value:void 0,accept:"image/png, image/gif, image/jpeg",onChange:function(e){a("file",e.currentTarget.files)}}),Object(m.jsx)("button",{disabled:0===n.file.length,className:"auth-button block",onClick:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t){var r,c,i;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),e.next=4,St(n.file);case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,i=c.data.files,a("categoryImage",(void 0===i?[]:i)[0]);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Upload Image"}),Object(m.jsx)("button",{className:"auth-button block",disabled:t||!n.categoryImage,onClick:function(){},children:"Update Category"})]})}})},vn=["subCategoryDetails"],yn=ve.a().shape({name:ve.b().required("Name is required!"),price:ve.b().required("Price is required!"),shippingCharges:ve.b().required("Shipping Charges is required!"),wholeSalePrice:ve.b().required("Price is required!"),subCategory:ve.b().required("Sub Category is required!"),productDescription:ve.b().required("Product Description is required!")}),Cn=function(e){var t,n=e.match,a=Object(ze.b)(tt),r=a.loading,c=(a.error,a.data),i=void 0===c?{}:c,s=Object(Ee.a)(ut),o=Object(u.a)(s,1)[0],b=i.categories,j=void 0===b?[]:b,p=Object(l.g)(),h=Object(ze.b)(lt,{variables:{id:null===n||void 0===n||null===(t=n.params)||void 0===t?void 0:t.id}}),O=h.loading,g=h.data;if(O||r)return null;var f=(void 0===g?{}:g).product,x=(f=void 0===f?{}:f).subCategoryDetails,v=Object(Y.a)(f,vn);return Object(m.jsx)(xe.c,{initialValues:Object(d.a)(Object(d.a)({name:"",price:"",wholeSalePrice:"",category:"",subCategory:"",shippingCharges:"",images:[],productDescription:"",file:[]},v),{},{category:x.categoryDetails}),validationSchema:yn,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t,a){var r;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.resetForm,e.prev=1,e.next=4,o({variables:t,id:null===n||void 0===n||null===(r=n.params)||void 0===r?void 0:r.id});case 4:p.push("/products/".concat(x.categoryDetails.id)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t,n=e.values,a=e.setFieldValue;return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"name",type:"text",placeholder:"Product Name",component:we}),Object(m.jsx)(xe.a,{name:"price",type:"text",placeholder:"Price",component:we}),Object(m.jsx)(xe.a,{name:"wholeSalePrice",type:"text",placeholder:"Whole Sale Price",component:we}),Object(m.jsx)(xe.a,{name:"shippingCharges",type:"text",placeholder:"Shipping Charges",component:we}),Object(m.jsx)(xe.a,{name:"productDescription",type:"text",placeholder:"Product Description",component:wt}),Object(m.jsx)(xe.a,{name:"category",type:"text",placeholder:"Category",component:Ct,options:j.map((function(e){return{name:e.name,value:e,label:e.name}}))}),Object(m.jsx)(xe.a,{name:"subCategory",type:"text",placeholder:"Sub Category",component:Ct,options:((null===(t=n.category)||void 0===t?void 0:t.subCategories)||[]).map((function(e){return{name:e.name,value:e.id,label:e.name}}))}),Object(m.jsx)(xe.a,{name:"file",type:"file",value:void 0,placeholder:"Images",component:we,multiple:!0,accept:"image/*, video/*",onChange:function(e){a("file",e.currentTarget.files)}}),Object(m.jsx)("button",{disabled:0===n.file.length,className:"auth-button block",onClick:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t){var r,c,i;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),e.next=4,St(n.file);case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,i=c.data.files,a("images",void 0===i?[]:i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Upload Image"}),Object(m.jsx)("button",{className:"auth-button block",disabled:0===n.images.length,onClick:function(){},children:"Update Product"})]})}})},Nn=Object(Pe.a)(Ht||(Ht=Object(Se.a)(["\n  mutation createRoleMapping($userId: ID!, $roleIds: [String]) {\n    createRoleMapping(roleIds: $roleIds, userId: $userId) {\n      id\n    }\n  }\n"]))),wn=Object(Pe.a)(Yt||(Yt=Object(Se.a)(["\n  query rolesMapping {\n    rolesMapping {\n      id\n      userId\n      roleIds\n      userDetails {\n        id\n        phone\n        name\n      }\n      roleDetails {\n        id\n        permissions\n        name\n        permissionsDetails {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),Sn=(Object(Pe.a)(Jt||(Jt=Object(Se.a)(["\n  query role($id: ID!) {\n    role(id: $id) {\n      id\n      name\n      permissionsDetails {\n        name\n        id\n      }\n    }\n  }\n"]))),Object(Pe.a)(Wt||(Wt=Object(Se.a)(["\n  mutation deleteRole($id: ID!) {\n    deleteRole(id: $id)\n  }\n"])))),Pn=(Object(Pe.a)(Qt||(Qt=Object(Se.a)(["\n  mutation editRole($name: String!, $permissions: [String], $id: ID!) {\n    editRole(id: $id, name: $name, permissions: $permissions)\n  }\n"]))),function(){var e=Object(a.useContext)(C).searchKeyword,t=Object(l.g)(),n=Object(ze.b)(wn),r=n.loading,c=(n.error,n.data),i=void 0===c?{}:c,s=n.refetch,d=new Proxy(new URLSearchParams(t.location.search),{get:function(e,t){return e.get(t)}});Object(a.useEffect)((function(){s()}),[]);var b=Object(Ee.a)(Sn),j=(Object(u.a)(b,1)[0],Object(a.useState)(null)),p=Object(u.a)(j,2),h=(p[0],p[1],Object(a.useState)(!1)),O=Object(u.a)(h,2),g=(O[0],O[1],i.products),f=g&&g.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())||!e}));d.productId&&(f=f&&f.filter((function(e){return e.id===d.productId})));var x=function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t){return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?Object(m.jsx)("div",{className:"products-wrapper",children:Object(m.jsx)("h1",{children:"Loading..."})}):Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)(o.b,{to:"/createUserRole",className:"btn btn-dark",style:{width:"200px"},children:"Create User Role"}),Object(m.jsx)(Zt,{disableActions:!0,onEdit:function(e){},data:i.rolesMapping,onDelete:x})]})}),kn=ve.a().shape({}),In=function(){Object(a.useContext)(g);var e=Object(ze.b)(un),t=e.loading,n=(e.error,e.data),r=void 0===n?{}:n,c=Object(ze.b)(De),i=(c.loading,c.data),s=void 0===i?{}:i,o=Object(l.g)(),d=(Object(l.h)(),Object(Ee.a)(Nn)),b=Object(u.a)(d,1)[0];if(t)return null;var j=r.roles,p=void 0===j?[]:j,h=s.users,O=void 0===h?[]:h;return Object(m.jsx)(xe.c,{initialValues:{userId:"",roleIds:""},validationSchema:kn,onSubmit:function(){var e=Object(fe.a)(Object(ge.a)().mark((function e(t,n){var a;return Object(ge.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.resetForm,e.prev=1,e.next=4,b({variables:t});case 4:a(),o.push("/userRoles"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(){return Object(m.jsxs)(xe.b,{className:"form-container",children:[Object(m.jsx)(xe.a,{name:"userId",type:"text",placeholder:"User",component:Ct,options:O.map((function(e){return{name:e.name,value:e.id,label:"".concat(e.name," - ").concat(e.phone)}}))}),Object(m.jsx)(xe.a,{name:"roleIds",type:"text",placeholder:"Roles",component:Ct,options:p.map((function(e){return{name:e.name,value:e.id,label:e.name}})),multi:!0}),Object(m.jsx)("button",{className:"auth-button block",onClick:function(){},children:"Create User Role"})]})}})},$n=(n(334),n(335),n(336),n(337),n(349)),Dn=n(351),En=n(348),qn=new $n.a({cache:new Dn.a,uri:"https://api.mbgroup.shop/graphql"}),Rn=[{id:"home",title:"Home",path:"/",exact:!0,component:rt,layout:Oe,showNav:!0},{id:"checkout",path:"/checkout",component:xt,layout:Oe,showNav:!1},{id:"auth",path:"/auth",component:Le,layout:Q,showNav:!1},{id:"register",path:"/register",component:mt,layout:Q,showNav:!1},{id:"createProduct",title:"Create Product",path:"/createProduct",component:kt,layout:Oe,permissions:[Be],showNav:!0,isPrivate:!0},{id:"createCategory",title:"Create Category",path:"/createCategory",component:$t,layout:Oe,permissions:[Me],showNav:!0,isPrivate:!0},{id:"createSubCategory",title:"Create Sub Category",path:"/createSubCategory",component:qt,layout:Oe,permissions:[Me],showNav:!0,isPrivate:!0},{id:"productByCategory",path:"/products/:categoryId",component:jt,layout:Oe,showNav:!1},{id:"categoryById",path:"/categories/:categoryId",component:xn,layout:Oe,showNav:!1,isPrivate:!0,permissions:[Me]},{id:"editProduct",path:"/editProduct/:id",component:Cn,layout:Oe,showNav:!1,isPrivate:!0,permissions:[Be]},Object(s.a)({id:"createRole",title:"Create Role",path:"/createRole",component:mn,layout:Oe,permissions:[Be],showNav:!1,isPrivate:!0},"permissions",[He]),{id:"roles",title:"Roles",path:"/roles",component:gn,layout:Oe,showNav:!0,isPrivate:!0,permissions:[He]},{id:"editRole",path:"/editRole/:id",component:On,layout:Oe,showNav:!1,isPrivate:!0,permissions:[He]},{id:"permissions",title:"Permissions",path:"/permissions",component:an,layout:Oe,showNav:!0,isPrivate:!0,permissions:[Ke]},{id:"createPermission",title:"Create Permission",path:"/createPermission",component:cn,layout:Oe,permissions:[Ke],showNav:!1,isPrivate:!0},{id:"editPermission",path:"/editPermission/:id",component:on,permissions:[Ke],layout:Oe,showNav:!1,isPrivate:!0},{id:"userRoles",title:"User Roles",path:"/userRoles",component:Pn,layout:Oe,showNav:!0,isPrivate:!0,permissions:[Ye]},{id:"createUserRole",title:"Create User Role",path:"/createUserRole",component:In,layout:Oe,showNav:!1,isPrivate:!0,permissions:[Ye]}],Ln=function(){return Object(m.jsx)(En.a,{client:qn,children:Object(m.jsx)(v,{children:Object(m.jsx)(S,{children:Object(m.jsx)(D,{children:Object(m.jsx)(U,{children:Object(m.jsx)(H,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(l.d,{children:Rn.map((function(e){return Object(m.jsx)(W,{path:e.path,exact:!!e.exact,component:e.component,layout:e.layout,isPrivate:!!e.isPrivate,permissions:e.permissions},e.id)}))})})})})})})})})};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(Ln,{})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.aa895f85.chunk.js.map